<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÿπÿßÿ±ÿ∂ JSON Ÿàÿπÿ±ÿ∂ ÿßŸÑÿµŸàÿ±</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .main-box {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            backdrop-filter: blur(10px);
        }
        
        .input-section {
            margin-bottom: 30px;
        }
        
        textarea {
            width: 100%;
            height: 200px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            direction: ltr;
            resize: vertical;
            margin-bottom: 15px;
            transition: border-color 0.3s;
        }
        
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        button {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            flex: 1;
            min-width: 150px;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }
        
        .btn-danger {
            background: #f44336;
            color: white;
        }
        
        .btn-danger:hover {
            background: #d32f2f;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: #4CAF50;
            color: white;
        }
        
        .btn-success:hover {
            background: #388E3C;
            transform: translateY(-2px);
        }
        
        .error-message {
            color: #f44336;
            background: #ffebee;
            padding: 10px;
            border-radius: 10px;
            margin-top: 10px;
            text-align: center;
            font-weight: bold;
        }
        
        .stats {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 15px;
            margin: 20px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .stats span {
            background: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            color: #333;
        }
        
        .images-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .image-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
            border: 1px solid #e0e0e0;
            position: relative;
        }
        
        .image-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
        }
        
        .image-preview {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background: #f5f5f5;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .image-preview:hover {
            transform: scale(1.05);
        }
        
        .image-info {
            padding: 15px;
        }
        
        .image-url {
            font-size: 12px;
            color: #666;
            word-break: break-all;
            background: #f5f5f5;
            padding: 8px;
            border-radius: 8px;
            margin: 8px 0;
            direction: ltr;
            font-family: monospace;
        }
        
        .copy-btn {
            background: #667eea;
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            border: none;
            cursor: pointer;
            width: 100%;
            transition: background 0.3s;
        }
        
        .copy-btn:hover {
            background: #5a67d8;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
            cursor: pointer;
            justify-content: center;
            align-items: center;
        }
        
        .modal img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            border-radius: 10px;
        }
        
        .modal-close {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            font-size: 30px;
            cursor: pointer;
            background: rgba(0,0,0,0.5);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
        }
        
        .modal-close:hover {
            background: rgba(0,0,0,0.8);
        }
        
        .image-order {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            z-index: 10;
        }
        
        .private-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: #ff9800;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            z-index: 10;
        }
        
        .search-box {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 16px;
            margin: 15px 0;
            padding-right: 40px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="%23666" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>');
            background-repeat: no-repeat;
            background-position: right 10px center;
        }
        
        .search-box:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            font-size: 18px;
            color: #666;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üè† ŸÖŸàŸÇÿπ ÿπÿßÿ±ÿ∂ ÿßŸÑÿµŸàÿ± ŸÖŸÜ JSON</h1>
        
        <div class="main-box">
            <div class="input-section">
                <textarea id="jsonInput" placeholder="ÿßŸÑÿµŸÇ JSON ŸáŸÜÿß...">{
  "result": {
    "user": {
      "userImages": [
        {
          "imageFile": {
            "url": "https://d3haz8kz57vxxi.cloudfront.net/a02c4e98a453befaa3e97d0f305d1a92_image_9a85954b-bd1c-401b-9930-8f9e0018cb9f.jpg"
          },
          "order": 1,
          "isPrivate": true
        },
        {
          "imageFile": {
            "url": "https://d3haz8kz57vxxi.cloudfront.net/b48cf9a3e8af4163ee45d9758b21f6f3_image_cd1f4080-725f-49f9-8008-398820397df5.jpg"
          },
          "order": 2,
          "isPrivate": true
        }
      ]
    }
  }
}</textarea>
                
                <div class="button-group">
                    <button class="btn-primary" onclick="parseJSON()">
                        üîç ÿπÿ±ÿ∂ ÿßŸÑÿµŸàÿ±
                    </button>
                    <button class="btn-danger" onclick="clearAll()">
                        üóëÔ∏è ŸÖÿ≥ÿ≠ ÿßŸÑŸÉŸÑ
                    </button>
                    <button class="btn-success" onclick="downloadAsTxt()">
                        üì• ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ±Ÿàÿßÿ®ÿ∑
                    </button>
                </div>
                
                <div id="error" class="error-message" style="display: none;"></div>
            </div>
            
            <div id="stats" class="stats" style="display: none;">
                <span id="imageCount">ÿπÿØÿØ ÿßŸÑÿµŸàÿ±: 0</span>
                <span id="privateCount">ÿÆÿßÿµ: 0</span>
                <span id="publicCount">ÿπÿßŸÖ: 0</span>
            </div>
            
            <input type="text" id="searchInput" class="search-box" placeholder="üîç ÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑÿ±Ÿàÿßÿ®ÿ∑..." onkeyup="filterImages()" style="display: none;">
            
            <div id="imagesContainer" class="images-container"></div>
            <div id="loading" class="loading" style="display: none;">ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...</div>
        </div>
    </div>
    
    <!-- Modal ŸÑŸÑÿ™ŸÉÿ®Ÿäÿ± -->
    <div id="imageModal" class="modal" onclick="closeModal()">
        <span class="modal-close" onclick="closeModal()">&times;</span>
        <img id="modalImage" src="" alt="ÿµŸàÿ±ÿ© ŸÖŸÉÿ®ÿ±ÿ©">
    </div>

    <script>
        let currentImages = [];
        
        function parseJSON() {
            const jsonInput = document.getElementById('jsonInput').value;
            const errorDiv = document.getElementById('error');
            const imagesContainer = document.getElementById('imagesContainer');
            const loading = document.getElementById('loading');
            const stats = document.getElementById('stats');
            const searchBox = document.getElementById('searchInput');
            
            errorDiv.style.display = 'none';
            loading.style.display = 'block';
            imagesContainer.innerHTML = '';
            
            try {
                const data = JSON.parse(jsonInput);
                const images = extractImageUrls(data);
                currentImages = images;
                
                if (images.length === 0) {
                    errorDiv.innerHTML = '‚ö†Ô∏è ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿµŸàÿ± ŸÅŸä ÿßŸÑŸÄ JSON';
                    errorDiv.style.display = 'block';
                    stats.style.display = 'none';
                    searchBox.style.display = 'none';
                } else {
                    displayImages(images);
                    updateStats(images);
                    stats.style.display = 'flex';
                    searchBox.style.display = 'block';
                    searchBox.value = '';
                }
            } catch (e) {
                errorDiv.innerHTML = '‚ùå ÿÆÿ∑ÿ£: JSON ÿ∫Ÿäÿ± ÿµÿßŸÑÿ≠ - ' + e.message;
                errorDiv.style.display = 'block';
                stats.style.display = 'none';
                searchBox.style.display = 'none';
                imagesContainer.innerHTML = '';
            } finally {
                loading.style.display = 'none';
            }
        }
        
        function extractImageUrls(obj, images = []) {
            if (obj && typeof obj === 'object') {
                // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑŸÉÿßÿ¶ŸÜ Ÿäÿ≠ÿ™ŸàŸä ÿπŸÑŸâ url ŸÖÿ®ÿßÿ¥ÿ±ÿ©
                if (obj.url && typeof obj.url === 'string' && (obj.url.includes('.jpg') || obj.url.includes('.jpeg') || obj.url.includes('.png') || obj.url.includes('.gif') || obj.url.includes('.webp'))) {
                    images.push({
                        url: obj.url,
                        order: obj.order || images.length + 1,
                        isPrivate: obj.isPrivate || false,
                        id: obj.id || `img_${Date.now()}_${Math.random()}`
                    });
                }
                
                // ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑÿÆÿµÿßÿ¶ÿµ
                for (let key in obj) {
                    if (obj.hasOwnProperty(key)) {
                        if (key === 'url' && typeof obj[key] === 'string' && (obj[key].includes('.jpg') || obj[key].includes('.jpeg') || obj[key].includes('.png') || obj[key].includes('.gif') || obj[key].includes('.webp'))) {
                            images.push({
                                url: obj[key],
                                order: obj.order || images.length + 1,
                                isPrivate: obj.isPrivate || false,
                                id: obj.id || `img_${Date.now()}_${Math.random()}`
                            });
                        } else if (typeof obj[key] === 'object') {
                            extractImageUrls(obj[key], images);
                        }
                    }
                }
            } else if (Array.isArray(obj)) {
                obj.forEach(item => extractImageUrls(item, images));
            }
            
            // ÿ•ÿ≤ÿßŸÑÿ© ÿßŸÑÿ™ŸÉÿ±ÿßÿ±
            return images.filter((img, index, self) => 
                index === self.findIndex((i) => i.url === img.url)
            );
        }
        
        function displayImages(images) {
            const container = document.getElementById('imagesContainer');
            container.innerHTML = '';
            
            images.sort((a, b) => (a.order || 0) - (b.order || 0));
            
            images.forEach((img, index) => {
                const card = document.createElement('div');
                card.className = 'image-card fade-in';
                card.dataset.url = img.url.toLowerCase();
                
                const order = img.order || index + 1;
                
                card.innerHTML = `
                    ${order ? `<div class="image-order">#${order}</div>` : ''}
                    ${img.isPrivate ? '<div class="private-badge">üîí ÿÆÿßÿµ</div>' : ''}
                    <img class="image-preview" src="${img.url}" alt="ÿµŸàÿ±ÿ© ${order}" onclick="openModal('${img.url}')" loading="lazy">
                    <div class="image-info">
                        <div class="image-url">${img.url}</div>
                        <button class="copy-btn" onclick="copyToClipboard('${img.url}', this)">üìã ŸÜÿ≥ÿÆ ÿßŸÑÿ±ÿßÿ®ÿ∑</button>
                    </div>
                `;
                
                container.appendChild(card);
            });
        }
        
        function updateStats(images) {
            const total = images.length;
            const privateCount = images.filter(img => img.isPrivate).length;
            const publicCount = total - privateCount;
            
            document.getElementById('imageCount').innerHTML = `üì∏ ÿπÿØÿØ ÿßŸÑÿµŸàÿ±: ${total}`;
            document.getElementById('privateCount').innerHTML = `üîí ÿÆÿßÿµ: ${privateCount}`;
            document.getElementById('publicCount').innerHTML = `üîì ÿπÿßŸÖ: ${publicCount}`;
        }
        
        function filterImages() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const filtered = currentImages.filter(img => img.url.toLowerCase().includes(searchTerm));
            displayImages(filtered);
            updateStats(filtered);
        }
        
        function clearAll() {
            document.getElementById('jsonInput').value = '';
            document.getElementById('imagesContainer').innerHTML = '';
            document.getElementById('error').style.display = 'none';
            document.getElementById('stats').style.display = 'none';
            document.getElementById('searchInput').style.display = 'none';
            document.getElementById('searchInput').value = '';
            currentImages = [];
        }
        
        function copyToClipboard(text, btn) {
            navigator.clipboard.writeText(text).then(() => {
                const originalText = btn.innerHTML;
                btn.innerHTML = '‚úÖ ÿ™ŸÖ ÿßŸÑŸÜÿ≥ÿÆ!';
                btn.style.background = '#4CAF50';
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.style.background = '#667eea';
                }, 2000);
            }).catch(() => {
                alert('ŸÅÿ¥ŸÑ ÿßŸÑŸÜÿ≥ÿÆÿå ÿ¨ÿ±ÿ® ŸäÿØŸàŸäÿßŸã');
            });
        }
        
        function openModal(url) {
            const modal = document.getElementById('imageModal');
            const modalImg = document.getElementById('modalImage');
            modal.style.display = 'flex';
            modalImg.src = url;
        }
        
        function closeModal() {
            document.getElementById('imageModal').style.display = 'none';
        }
        
        function downloadAsTxt() {
            if (currentImages.length === 0) {
                alert('ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿµŸàÿ± ŸÑÿ™ÿ≠ŸÖŸäŸÑŸáÿß');
                return;
            }
            
            let text = 'ÿ±Ÿàÿßÿ®ÿ∑ ÿßŸÑÿµŸàÿ±:\n\n';
            currentImages.forEach((img, index) => {
                text += `${index + 1}. ${img.url}\n`;
                text += `   ÿßŸÑÿ™ÿ±ÿ™Ÿäÿ®: ${img.order || index + 1}\n`;
                text += `   ÿßŸÑŸÜŸàÿπ: ${img.isPrivate ? 'ÿÆÿßÿµ' : 'ÿπÿßŸÖ'}\n\n`;
            });
            
            const blob = new Blob([text], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ÿßŸÑÿµŸàÿ±_${new Date().toISOString().slice(0,10)}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }
        
        // ÿ™ŸÜŸÅŸäÿ∞ ÿ™ŸÑŸÇÿßÿ¶Ÿä ÿπŸÜÿØ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸÅÿ≠ÿ©
        window.onload = function() {
            parseJSON();
        };
        
        // ÿØÿπŸÖ ÿßŸÑÿ≥ÿ≠ÿ® ŸàÿßŸÑÿ•ŸÅŸÑÿßÿ™
        document.getElementById('jsonInput').addEventListener('dragover', (e) => {
            e.preventDefault();
            e.target.style.borderColor = '#667eea';
        });
        
        document.getElementById('jsonInput').addEventListener('dragleave', (e) => {
            e.target.style.borderColor = '#e0e0e0';
        });
        
        document.getElementById('jsonInput').addEventListener('drop', (e) => {
            e.preventDefault();
            e.target.style.borderColor = '#e0e0e0';
            
            const file = e.dataTransfer.files[0];
            if (file && file.type === 'application/json') {
                const reader = new FileReader();
                reader.onload = (event) => {
                    document.getElementById('jsonInput').value = event.target.result;
                    parseJSON();
                };
                reader.readAsText(file);
            } else {
                alert('ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿ≥ŸÇÿßÿ∑ ŸÖŸÑŸÅ JSON ÿµÿ≠Ÿäÿ≠');
            }
        });
    </script>
</body>
</html>
