<!DOCTYPE html>
<html>
<head>
    <title>TikTok Scraper</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>TikTok Scraper</h1>
    <p>Enter a TikTok username below and click "Scrape Info" to get user information:</p>
    <input type="text" id="username">
    <button id="scrape-btn">Scrape Info</button>
    <br>
    <br>
    <div id="result-container">
        <h2>User Info</h2>
        <p id="user-id"></p>
        <p id="nickname"></p>
        <p id="verified"></p>
        <p id="private"></p>
        <p id="sec-uid"></p>
        <p id="followers"></p>
        <p id="following"></p>
        <p id="create-time"></p>
        <p id="last-change"></p>
        <p id="region"></p>
    </div>

    <script>
        function scrapeTikTok() {
            var username = $('#username').val();
            var url = 'https://www.tiktok.com/@' + username;

            $.getJSON('https://api.allorigins.win/get?url=' + encodeURIComponent(url) + '&callback=?', function (data) {
                var html = data.contents;
                var parser = new DOMParser();
                var doc = parser.parseFromString(html, "text/html");

                var script = doc.getElementById('SIGI_STATE').textContent;
                var userData = JSON.parse(script.split('window.__INIT_PROPS__ = ')[1].split(';')[0]);

                var userInfo = userData.userData.userInfo;
                $('#user-id').text('User ID: ' + userInfo.user.id);
                $('#nickname').text('Nickname: ' + userInfo.user.nickname);
                $('#verified').text('Verified: ' + userInfo.user.verified);
                $('#private').text('Private: ' + userInfo.user.privateAccount);
                $('#sec-uid').text('Sec UID: ' + userInfo.user.secUid);
                $('#followers').text('Followers: ' + userInfo.stats.followerCount);
                $('#following').text('Following: ' + userInfo.stats.followingCount);
                $('#create-time').text('Create Time: ' + new Date(userInfo.user.createTime * 1000));
                $('#last-change').text('Last Change: ' + new Date(userInfo.user.nickNameModifyTime * 1000));
                $('#region').text('Region: ' + userInfo.user.region);
            }).fail(function (jqXHR, textStatus, errorThrown) {
                console.log('Error:', jqXHR, textStatus, errorThrown);
            });
        }

        $('#scrape-btn').click(scrapeTikTok);
    </script>
</body>
</html>
