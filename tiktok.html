<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>TikTok Scraper</title>
  </head>
  <body>
    <h1>TikTok Scraper</h1>
    <form id="form">
      <label for="username">Username:</label>
      <input type="text" id="username" name="username"><br><br>
      <button type="button" onclick="scrapeData()">Scrape Info</button>
    </form>
    <div id="output"></div>

    <script>
      function scrapeData() {
        var username = document.getElementById("username").value;
        console.log("Username:", username);

        var xhr = new XMLHttpRequest();
        xhr.open("GET", "https://www.tiktok.com/@"+username);
        xhr.setRequestHeader("user-agent", "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36");
        xhr.onload = function() {
          var parser = new DOMParser();
          var doc = parser.parseFromString(xhr.responseText, "text/html");
          console.log("Response:", doc);

          var data = doc.querySelector("#__NEXT_DATA__").innerHTML;
          console.log("Data:", data);

          var json = JSON.parse(data);
          console.log("JSON:", json);

          var userInfo = json.props.pageProps.userInfo;
          console.log("User Info:", userInfo);

          var output = document.getElementById("output");
          output.innerHTML = "<h2>User Info</h2>";
          output.innerHTML += "<p>User ID: "+userInfo.user.id+"</p>";
          output.innerHTML += "<p>Username: "+userInfo.user.uniqueId+"</p>";
          output.innerHTML += "<p>Verified: "+userInfo.user.verified+"</p>";
          output.innerHTML += "<p>Private Account: "+userInfo.user.privateAccount+"</p>";
          output.innerHTML += "<p>SecUid: "+userInfo.user.secUid+"</p>";
          output.innerHTML += "<p>Followers: "+userInfo.stats.followerCount+"</p>";
          output.innerHTML += "<p>Following: "+userInfo.stats.followingCount+"</p>";
          output.innerHTML += "<p>User Create Time: "+new Date(userInfo.user.createTime*1000).toLocaleString()+"</p>";
          output.innerHTML += "<p>Last Time Change Nickname: "+new Date(userInfo.user.modifyTime*1000).toLocaleString()+"</p>";
          output.innerHTML += "<p>Account Region: "+userInfo.region+"</p>";
        };
        xhr.send();
      }
    </script>
  </body>
</html>
